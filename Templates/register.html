<!DOCTYPE html>
<html>
<head>
    <title>Registeration</title>
    <link href="/static/css/login.css" rel="stylesheet">
</head>
<body>
    <div class="loginpage">
        <h2>Welcome Cars Services</h2>
        <form id="register">
                <input type="text" id="name" placeholder="Name" name="name">
                <input type="email" id="email" placeholder="Email" name="email">
                <input type="password" id="password" placeholder="Password" name="password">
                <button id='signup'>Sign Up</button>
                <label class="error"></label>
                <h3><span onclick="window.location.href='/'">Login</span></h3>
       </form>
       </div>
       <script>
          const registerForm=document.querySelector('#register');
          registerForm.addEventListener('submit',async(e)=>{
            e.preventDefault();
               const form =new FormData(e.target);
               const obj=Object.fromEntries(form.entries());
              try
              {
                  const response=await fetch('/register',{headers:{'Content-Type':'application/json'},method:'POST',
                   body:JSON.stringify(obj)
                })
                 const data=await response.json();
                 if(data.success===true)
                 {
                    alert(data.message);
                    window.location.href="/login";
                  
                    return;
                 }
                 alert(data.message);
              }
              catch(error)
              {
                console.log('error',error);
              }
          })
       </script>
</body>
</html>
